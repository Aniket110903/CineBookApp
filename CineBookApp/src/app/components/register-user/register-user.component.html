<div class="container mt-5" style="max-width: 480px;">
  <div class="card shadow-sm border-primary">
    <div class="card-body p-4">
      <h2 class="card-title mb-4 text-center fw-bold">Register</h2>

      <form #registerForm="ngForm" (ngSubmit)="submitRegisterForm(registerForm)" novalidate>
        <div class="mb-3">
          <label for="firstName" class="form-label">First Name</label>
          <input type="text"
                 id="firstName"
                 name="firstName"
                 class="form-control"
                 ngModel
                 required
                 #firstName="ngModel"
                 [class.is-invalid]="firstName.invalid && (firstName.dirty || firstName.touched)"
                 [class.is-valid]="firstName.valid && (firstName.dirty || firstName.touched)" />
          <div *ngIf="firstName.invalid && (firstName.dirty || firstName.touched)" class="invalid-feedback">
            First name is required.
          </div>
          <div *ngIf="firstName.valid && (firstName.dirty || firstName.touched)" class="valid-feedback">
            Looks good!
          </div>
        </div>

        <div class="mb-3">
          <label for="lastName" class="form-label">Last Name</label>
          <input type="text"
                 id="lastName"
                 name="lastName"
                 class="form-control"
                 ngModel
                 required
                 #lastName="ngModel"
                 [class.is-invalid]="lastName.invalid && (lastName.dirty || lastName.touched)"
                 [class.is-valid]="lastName.valid && (lastName.dirty || lastName.touched)" />
          <div *ngIf="lastName.invalid && (lastName.dirty || lastName.touched)" class="invalid-feedback">
            Last name is required.
          </div>
          <div *ngIf="lastName.valid && (lastName.dirty || lastName.touched)" class="valid-feedback">
            Looks good!
          </div>
        </div>

        <div class="mb-3">
          <label for="email" class="form-label">Email</label>
          <input type="email"
                 id="email"
                 name="email"
                 class="form-control"
                 ngModel
                 required
                 email
                 #email="ngModel"
                 [class.is-invalid]="email.invalid && (email.dirty || email.touched)"
                 [class.is-valid]="email.valid && (email.dirty || email.touched)" />
          <div *ngIf="email.invalid && (email.dirty || email.touched)" class="invalid-feedback">
            <div *ngIf="email.errors?.['required']">Email is required.</div>
            <div *ngIf="email.errors?.['email']">Please enter a valid email.</div>
          </div>
          <div *ngIf="email.valid && (email.dirty || email.touched)" class="valid-feedback">
            Looks good!
          </div>
        </div>

        <div class="mb-3">
          <label for="password" class="form-label">Password</label>
          <input type="password"
                 id="password"
                 name="password"
                 class="form-control"
                 ngModel
                 required
                 minlength="6"
                 #password="ngModel"
                 [class.is-invalid]="password.invalid && (password.dirty || password.touched)"
                 [class.is-valid]="password.valid && (password.dirty || password.touched)" />
          <div *ngIf="password.invalid && (password.dirty || password.touched)" class="invalid-feedback">
            <div *ngIf="password.errors?.['required']">Password is required.</div>
            <div *ngIf="password.errors?.['minlength']">Password must be at least 6 characters.</div>
          </div>
          <div *ngIf="password.valid && (password.dirty || password.touched)" class="valid-feedback">
            Looks good!
          </div>
        </div>

        <div class="mb-3">
          <label for="address" class="form-label">Address</label>
          <input type="text"
                 id="address"
                 name="address"
                 class="form-control"
                 ngModel
                 required
                 #address="ngModel"
                 [class.is-invalid]="address.invalid && (address.dirty || address.touched)"
                 [class.is-valid]="address.valid && (address.dirty || address.touched)" />
          <div *ngIf="address.invalid && (address.dirty || address.touched)" class="invalid-feedback">
            Address is required.
          </div>
          <div *ngIf="address.valid && (address.dirty || address.touched)" class="valid-feedback">
            Looks good!
          </div>
        </div>

        <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>

        <button type="submit" class="btn btn-primary w-100" [disabled]="isRegistering || registerForm.invalid">
          Register
        </button>
      </form>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal fade" [class.show]="showModal" [style.display]="showModal ? 'block' : 'none'" tabindex="-1" role="dialog" aria-labelledby="resetCodeModalLabel"
       [attr.aria-hidden]="!showModal">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content border-primary">
        <div class="modal-header">
          <h5 class="modal-title" id="resetCodeModalLabel">Registration Successful</h5>
          <button type="button" class="btn-close" aria-label="Close" (click)="closeModal()"></button>
        </div>
        <div class="modal-body">
          <p>Your reset code is:</p>
          <h3 class="text-primary">{{ resetCode }}</h3>
          <p><small>Note: Save this code to update your credentials in the future.</small></p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" (click)="closeModal()">OK</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal backdrop -->
  <div class="modal-backdrop fade show" *ngIf="showModal"></div>
</div>
